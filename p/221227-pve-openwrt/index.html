<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="一种更新运行在 Proxmox VE 中的 OpenWrt 虚拟机的固件版本的方案"><title>PVE 更新 OpenWrt 教程</title>
<link rel=canonical href=https://blog.kmtea.eu/p/221227-pve-openwrt/><link rel=stylesheet href=/scss/style.min.2cde0d6ad43d9b540cf0c948c669e62ebee4bc9888606690f283e6fab5b821e5.css><meta property="og:title" content="PVE 更新 OpenWrt 教程"><meta property="og:description" content="一种更新运行在 Proxmox VE 中的 OpenWrt 虚拟机的固件版本的方案"><meta property="og:url" content="https://blog.kmtea.eu/p/221227-pve-openwrt/"><meta property="og:site_name" content="酷玛阁 | KumaTea's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="Guide"><meta property="article:tag" content="OpenWrt"><meta property="article:tag" content="Proxmox"><meta property="article:tag" content="VM"><meta property="article:published_time" content="2022-12-27T17:00:00+08:00"><meta property="article:modified_time" content="2023-06-20T23:01:21+08:00"><meta property="og:image" content="https://blog.kmtea.eu/p/221227-pve-openwrt/img/cover.jpg"><meta name=twitter:site content="@KumaTea0"><meta name=twitter:creator content="@KumaTea0"><meta name=twitter:title content="PVE 更新 OpenWrt 教程"><meta name=twitter:description content="一种更新运行在 Proxmox VE 中的 OpenWrt 虚拟机的固件版本的方案"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.kmtea.eu/p/221227-pve-openwrt/img/cover.jpg"><link rel="shortcut icon" href=//kmtea.eu/res/2206/avatar.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-P86D5805EG"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-P86D5805EG",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3876653977265938" crossorigin=anonymous></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=//kmtea.eu/res/2206/avatar.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>酷玛阁 | KumaTea's Blog</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>关于</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜索</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>联系</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#准备工作>准备工作</a></li><li><a href=#为什么不能用正常方式升级>为什么不能用正常方式升级？</a></li><li><a href=#上传新固件>上传新固件</a></li><li><a href=#更换系统固件>更换系统固件</a></li><li><a href=#恢复配置>恢复配置</a></li><li><a href=#完成>完成</a></li><li><a href=#references>References</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/221227-pve-openwrt/><img src=/p/221227-pve-openwrt/img/cover_huac6fe951059aa453777e1cd724557934_72093_800x0_resize_q75_box.jpg srcset="/p/221227-pve-openwrt/img/cover_huac6fe951059aa453777e1cd724557934_72093_800x0_resize_q75_box.jpg 800w, /p/221227-pve-openwrt/img/cover_huac6fe951059aa453777e1cd724557934_72093_1600x0_resize_q75_box.jpg 1600w" width=800 height=348 loading=lazy alt="Featured image of post PVE 更新 OpenWrt 教程"></a></div><div class=article-details><header class=article-category><a href=/categories/guides/>Guides</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/221227-pve-openwrt/>PVE 更新 OpenWrt 教程</a></h2><h3 class=article-subtitle>一种更新运行在 Proxmox VE 中的 OpenWrt 虚拟机的固件版本的方案</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2022-12-27</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pen" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M4 20h3L19 8a1.5 1.5.0 00-3-3L4 17v3"/><line x1="15.25" y1="6.75" x2="17.25" y2="8.75"/><circle cx="18" cy="18" r="4"/><path d="M18 16.496V18l1 1"/></svg><time class=article-lastmod>06-20</time></div></footer></div></header><section class=article-content><h1 id=pve-更新-openwrt>PVE 更新 OpenWrt</h1><h2 id=准备工作>准备工作</h2><ul><li><p>OpenWrt 固件
<img src=/p/221227-pve-openwrt/img/01-firmware.jpg width=933 height=373 srcset="/p/221227-pve-openwrt/img/01-firmware_hu8e4e04a9903c905527aea117356e9523_36602_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/01-firmware_hu8e4e04a9903c905527aea117356e9523_36602_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Firmware class=gallery-image data-flex-grow=250 data-flex-basis=600px></p><ul><li>建议编译时 <strong>不要</strong> 选中 <code>gzip</code> 压缩，否则容易出现各种奇妙的问题</li><li>一般情况下不选用名称带有 <code>rootfs</code> 的固件</li></ul></li><li><p>USB 网卡 (可选)
<img src=/p/221227-pve-openwrt/img/02-usb.jpg width=1280 height=720 srcset="/p/221227-pve-openwrt/img/02-usb_hu24bb9d46a15e3e5957272eda3d810bbd_117561_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/02-usb_hu24bb9d46a15e3e5957272eda3d810bbd_117561_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="USB Ethernet" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><ul><li>如果你和我一样把全部网口都直通了，则需要在更新时使用其他的方式连接到 PVE</li><li>PVE 默认不会自动启用新插入的网卡，你可能需要
<code>ifup enx00xxxxxxxxxx && ip link set dev enx00xxxxxxxxxx up</code>
其中网卡名 <code>enx00xxxxxxxxxx</code> 可以在 <code>ifconfig</code> 查询
<img src=/p/221227-pve-openwrt/img/03-ifup.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/03-ifup_hu97dad670c4ca60988cb7b9d68620cd9d_57745_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/03-ifup_hu97dad670c4ca60988cb7b9d68620cd9d_57745_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=ifup class=gallery-image data-flex-grow=177 data-flex-basis=426px></li></ul></li></ul><h2 id=为什么不能用正常方式升级>为什么不能用正常方式升级？</h2><p>众所周知，OpenWrt 正常升级方式是在 <code>系统</code> - <code>备份升级</code> 中升级：</p><p><img src=/p/221227-pve-openwrt/img/04-upgrade.jpg width=1892 height=934 srcset="/p/221227-pve-openwrt/img/04-upgrade_hu07ea250d21de23cd3dc011d24b1525f7_54003_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/04-upgrade_hu07ea250d21de23cd3dc011d24b1525f7_54003_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Upgrade class=gallery-image data-flex-grow=202 data-flex-basis=486px></p><p>但你会发现 x86 固件是不包含 <code>sysupgrade</code> 固件的：</p><p><img src=/p/221227-pve-openwrt/img/05-checksum.jpg width=1313 height=535 srcset="/p/221227-pve-openwrt/img/05-checksum_hu61c0b4870c5252d807474774a552972c_45405_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/05-checksum_hu61c0b4870c5252d807474774a552972c_45405_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Checksum class=gallery-image data-flex-grow=245 data-flex-basis=589px></p><p>所以，对于运行在 Proxmox VE 中的 OpenWrt 虚拟机，我们只能通过手动方式升级</p><hr><p>在开始之前，请确保你划分了一块虚拟硬盘作为 <code>overlay</code> 分区放置配置。</p><p><img src=/p/221227-pve-openwrt/img/06-overlay.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/06-overlay_hu496d56b6802810a226c12f367f4f8133_124677_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/06-overlay_hu496d56b6802810a226c12f367f4f8133_124677_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=overlay class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>如果没有，我强烈建议你花十分钟搜下教程
(关键词 <code>extroot overlay</code>)
完成这件事， <strong>功在当代利在千秋</strong></p><h2 id=上传新固件>上传新固件</h2><p>上传到 <code>local</code> - <code>ISO</code></p><p><img src=/p/221227-pve-openwrt/img/07-upload.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/07-upload_hudd9a95979472a06f1937b22db409d9d2_80601_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/07-upload_hudd9a95979472a06f1937b22db409d9d2_80601_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Upload firmware" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>推荐检查 <code>sha256sum</code></p><h2 id=更换系统固件>更换系统固件</h2><ol><li>在以非目标 OpenWrt 内网的方式连接 PVE 的情况下，关闭虚拟机<br><img src=/p/221227-pve-openwrt/img/08-shutdown.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/08-shutdown_hud7dc4685595cfaf916347d5f9421aacc_88661_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/08-shutdown_hud7dc4685595cfaf916347d5f9421aacc_88661_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Shutdown class=gallery-image data-flex-grow=177 data-flex-basis=426px>
可以用 PVE 的 <code>Shutdown</code> 按钮，也可以在 Console 输入 <code>poweroff</code><br></li><li>选中系统盘<br><img src=/p/221227-pve-openwrt/img/09-select.jpg width=1085 height=434 srcset="/p/221227-pve-openwrt/img/09-select_hu25daed2a7865e770512ee66f467c48ef_31893_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/09-select_hu25daed2a7865e770512ee66f467c48ef_31893_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Select class=gallery-image data-flex-grow=250 data-flex-basis=600px>
点击 <code>Detach</code> 并确认<br><img src=/p/221227-pve-openwrt/img/10-detach.jpg width=939 height=387 srcset="/p/221227-pve-openwrt/img/10-detach_huf998fbe0e0aef7b92bb49a81611c6ad2_19197_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/10-detach_huf998fbe0e0aef7b92bb49a81611c6ad2_19197_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Detach class=gallery-image data-flex-grow=242 data-flex-basis=582px>
再在下方找到 <code>Unused Disk 0</code> 并 <code>Remove</code> 删除<br><img src=/p/221227-pve-openwrt/img/11-remove.jpg width=1288 height=730 srcset="/p/221227-pve-openwrt/img/11-remove_hud69c0c108b82e63b281f908dbea82cec_41846_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/11-remove_hud69c0c108b82e63b281f908dbea82cec_41846_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Remove class=gallery-image data-flex-grow=176 data-flex-basis=423px></li><li>导入新固件<br>来到 <strong>PVE 的 Console</strong> 输入：<br><code>qm importdisk 101 /var/lib/vz/template/iso/openwrt-x86-64-generic-squashfs-combined-efi.img local-lvm</code><br>其中 <code>101</code> 是你的 OpenWrt 虚拟机 ID
<img src=/p/221227-pve-openwrt/img/12-import.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/12-import_hu2c89a0ea4a310c7bd36f87f2c6c0e6b2_160471_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/12-import_hu2c89a0ea4a310c7bd36f87f2c6c0e6b2_160471_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Import class=gallery-image data-flex-grow=177 data-flex-basis=426px>
随后一个新的 <code>Unused Disk 0</code> 出现了
<img src=/p/221227-pve-openwrt/img/13-disk.jpg width=1576 height=819 srcset="/p/221227-pve-openwrt/img/13-disk_hu76113ddb93a145cc5f63fa929b8cbe2d_86370_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/13-disk_hu76113ddb93a145cc5f63fa929b8cbe2d_86370_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Found new Unused" class=gallery-image data-flex-grow=192 data-flex-basis=461px></li><li>启用新系统盘<br>选中新的 <code>Unused Disk 0</code> 并点击 <code>Edit</code>，确认即可<br><img src=/p/221227-pve-openwrt/img/14-edit.jpg width=1398 height=562 srcset="/p/221227-pve-openwrt/img/14-edit_hu16ff1633747892088e88b8728d43d3e4_32802_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/14-edit_hu16ff1633747892088e88b8728d43d3e4_32802_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Attach Unused Disk 0" class=gallery-image data-flex-grow=248 data-flex-basis=597px></li><li>启动虚拟机</li></ol><h2 id=恢复配置>恢复配置</h2><ol><li>按一下回车激活 Console<br><img src=/p/221227-pve-openwrt/img/15-console.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/15-console_hu2ab3a4f22632ad58cad2465494a7bcba_111342_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/15-console_hu2ab3a4f22632ad58cad2465494a7bcba_111342_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Activate console" class=gallery-image data-flex-grow=177 data-flex-basis=426px></li><li>此时，原先的 <code>overlay</code> 会被自动挂载为 <code>/mnt/sda1</code> (有时是 <code>sdb1</code>)<br>我们可以发现，该目录下 <code>etc</code> 内含有一 <code>.extroot-uuid</code> 文件。<br><img src=/p/221227-pve-openwrt/img/16-cleanup.jpg width=977 height=445 srcset="/p/221227-pve-openwrt/img/16-cleanup_huf29fe62ff5827cf9b259b501939c84a0_26087_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/16-cleanup_huf29fe62ff5827cf9b259b501939c84a0_26087_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Cleanup class=gallery-image data-flex-grow=219 data-flex-basis=526px>
这一文件会误导系统读取正确的 UUID 并导致无法挂载！<br>使用 <code>rm -rf /mnt/sda1/etc</code> 将之删除。<br><code>/etc/fstab</code> 也是没用的： <code>rm -f /etc/fstab</code></li><li>查看自动生成的 <code>/etc/config/fstab</code><br><img src=/p/221227-pve-openwrt/img/17-old-fstab.jpg width=912 height=724 srcset="/p/221227-pve-openwrt/img/17-old-fstab_hu4ed30a0f2b22ad729cf7c80f653550d2_34560_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/17-old-fstab_hu4ed30a0f2b22ad729cf7c80f653550d2_34560_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Old fstab" class=gallery-image data-flex-grow=125 data-flex-basis=302px></li></ol><ul><li>去掉用不到的 <code>boot</code> 挂载</li><li>把 <code>sda1</code> 的 UUID 移动到 <code>overlay</code> 配置下
<img src=/p/221227-pve-openwrt/img/18-new-fstab.jpg width=1250 height=838 srcset="/p/221227-pve-openwrt/img/18-new-fstab_hu722882836f70c5db95529e9392ee6cb3_38960_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/18-new-fstab_hu722882836f70c5db95529e9392ee6cb3_38960_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="New fstab" class=gallery-image data-flex-grow=149 data-flex-basis=357px>
保存后重启</li></ul><ol start=4><li>把修改的 <code>/etc/config/fstab</code> 同步到配置分区<br><code>cp -a /etc/config/fstab /mnt/sda1/upper/etc/config/</code>
<img src=/p/221227-pve-openwrt/img/19-sync-fstab.jpg width=1297 height=331 srcset="/p/221227-pve-openwrt/img/19-sync-fstab_hua9444a693589a9994f5d13e8bb9b5ff8_18853_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/19-sync-fstab_hua9444a693589a9994f5d13e8bb9b5ff8_18853_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Sync config" class=gallery-image data-flex-grow=391 data-flex-basis=940px></li></ol><h2 id=完成>完成</h2><ol><li>重启</li><li>检查 <code>df -h</code>，可发现配置分区已成功挂载！
<img src=/p/221227-pve-openwrt/img/20-reboot.jpg width=1920 height=1080 srcset="/p/221227-pve-openwrt/img/20-reboot_hufbc06ac70859a8c632ff8a68ec3e1e87_69313_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/20-reboot_hufbc06ac70859a8c632ff8a68ec3e1e87_69313_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Reboot class=gallery-image data-flex-grow=177 data-flex-basis=426px></li></ol><h2 id=references>References</h2><p>我被万恶的 <code>.extroot-uuid</code> 困扰了几个月之久，直到看到了
<a class=link href=https://forum.openwrt.org/t/solved-extroot-not-working-on-18-06/16723/2 target=_blank rel=noopener>这篇帖子</a></p><p><img src=/p/221227-pve-openwrt/img/21-forum.jpg width=1077 height=1280 srcset="/p/221227-pve-openwrt/img/21-forum_huc3b7e49d830a4409ff1c8a990966c57c_49369_480x0_resize_q75_box.jpg 480w, /p/221227-pve-openwrt/img/21-forum_huc3b7e49d830a4409ff1c8a990966c57c_49369_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=Solution class=gallery-image data-flex-grow=84 data-flex-basis=201px></p><p>因此写这篇教程广而告之。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/guide/>Guide</a>
<a href=/tags/openwrt/>OpenWrt</a>
<a href=/tags/proxmox/>Proxmox</a>
<a href=/tags/vm/>VM</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/221003-glibc-openwrt-en/><div class=article-image><img src=/p/221003-glibc-openwrt/img/cover.jpg loading=lazy data-key=221003-glibc-openwrt-en data-hash=/p/221003-glibc-openwrt/img/cover.jpg></div><div class=article-details><h2 class=article-title>Add glibc to OpenWrt</h2></div></a></article><article class=has-image><a href=/p/221003-glibc-openwrt/><div class=article-image><img src=/p/221003-glibc-openwrt/img/cover.804c41e2418cc2ec811d4f1867ed69c3_hua262ebb740f18203d1cd8fd284b67238_27891_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post 向 OpenWrt 添加 glibc" data-key=221003-glibc-openwrt data-hash="md5-gExB4kGMwuyBHU8YZ+1pww=="></div><div class=article-details><h2 class=article-title>向 OpenWrt 添加 glibc</h2></div></a></article><article class=has-image><a href=/p/231013-saas/><div class=article-image><img src=/p/231013-saas/img/cover.3f827767f29dbe88cf45e19edbd287ac_huebbfad1edfa8e198fe68a27ac6a615ca_46560_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post SaaS 平台 Python 应用部署实战" data-key=231013-saas data-hash="md5-P4J3Z/KdvojPReGe29KHrA=="></div><div class=article-details><h2 class=article-title>SaaS 平台 Python 应用部署实战</h2></div></a></article><article class=has-image><a href=/p/230718-modem-decrypt/><div class=article-image><img src=/p/230718-modem-decrypt/img/cover.8b7cc96a6fbdd9b4aa9af57a6717b0b8_hu9e2107f7c46e82182743b850ca0770b6_37874_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post 诺基亚贝尔光猫宽带密码破解提取" data-key=230718-modem-decrypt data-hash="md5-i3zJam+92bSqmvV6ZxewuA=="></div><div class=article-details><h2 class=article-title>诺基亚贝尔光猫宽带密码破解提取</h2></div></a></article><article class=has-image><a href=/p/230617-apple-pay/><div class=article-image><img src=/p/230617-apple-pay/img/err-invalid.c271f62475a3b3c34dda6e5a8ffae6df_huf3c10c93b5b3d869ba6a8349297c4b96_19310_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Apple Pay 绑卡失败原因速查" data-key=230617-apple-pay data-hash="md5-wnH2JHWjs8NN2m5aj/rm3w=="></div><div class=article-details><h2 class=article-title>Apple Pay 绑卡失败原因速查</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=KumaTea/blog data-repo-id=R_kgDOHa9iHQ data-category=Q&amp;A data-category-id=DIC_kwDOHa9iHc4CXYZJ data-mapping=pathname data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2023 酷玛阁 | KumaTea's Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>